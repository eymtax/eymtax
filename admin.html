<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>لوحة التحكم - Eymta X</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        .header {
            background: #0077cc;
            color: white;
            padding: 1rem;
            text-align: center;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .login-form {
            max-width: 400px;
            margin: 50px auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .dashboard {
            display: none;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input, select, textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }

        button {
            background: #0077cc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
        }

        button:hover {
            background: #005fa3;
        }

        .companies-list {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .company-item {
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .actions {
            display: flex;
            gap: 10px;
        }

        .edit-btn, .delete-btn {
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
        }

        .edit-btn {
            background: #28a745;
            color: white;
        }

        .delete-btn {
            background: #dc3545;
            color: white;
        }

        .add-company-form {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .nav-tab {
            padding: 10px 20px;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
        }

        .nav-tab.active {
            background: #0077cc;
            color: white;
            border-color: #0077cc;
        }

        .sidebar {
            width: 250px;
            background: #2c3e50;
            color: white;
            position: fixed;
            height: 100vh;
            padding: 20px 0;
            overflow-y: auto;
        }

        .sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar-menu li {
            padding: 10px 20px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .sidebar-menu li:hover {
            background: #34495e;
        }

        .sidebar-menu li.active {
            background: #3498db;
        }

        .main-content {
            margin-right: 250px;
            padding: 20px;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-card h3 {
            margin: 0;
            color: #666;
        }

        .stat-card .number {
            font-size: 2em;
            color: #0077cc;
            margin: 10px 0;
        }

        .settings-form {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .users-list {
            background: white;
            padding: 20px;
            border-radius: 8px;
        }

        .user-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div style="text-align: center; padding: 20px;">
            <h2>Eymta X</h2>
            <p>لوحة التحكم</p>
        </div>
        <ul class="sidebar-menu">
            <li class="active" onclick="showSection('dashboard')">الرئيسية</li>
            <li onclick="showSection('companies')">إدارة الشركات</li>
            <li onclick="showSection('categories')">إدارة التصنيفات</li>
            <li onclick="showSection('homepage')">الصفحة الرئيسية</li>
            <li onclick="showSection('users')">المستخدمين</li>
            <li onclick="showSection('settings')">الإعدادات</li>
            <li onclick="showSection('reports')">التقارير</li>
            <li onclick="logout()">تسجيل الخروج</li>
        </ul>
    </div>

    <div class="main-content">
        <!-- قسم الرئيسية -->
        <div id="dashboard" class="section">
            <h2>لوحة المعلومات</h2>
            <div class="dashboard-stats">
                <div class="stat-card">
                    <h3>إجمالي الشركات</h3>
                    <div class="number" id="totalCompanies">0</div>
                </div>
                <div class="stat-card">
                    <h3>الشركات المميزة</h3>
                    <div class="number" id="vipCompanies">0</div>
                </div>
                <div class="stat-card">
                    <h3>التصنيفات</h3>
                    <div class="number" id="totalCategories">0</div>
                </div>
                <div class="stat-card">
                    <h3>المستخدمين</h3>
                    <div class="number" id="totalUsers">0</div>
                </div>
            </div>
            <div class="chart-container">
                <h3>إحصائيات الزيارات</h3>
                <canvas id="visitsChart"></canvas>
            </div>
        </div>

        <!-- قسم إدارة الشركات -->
        <div id="companies" class="section" style="display: none;">
            <div class="add-company-form">
                <h2>إضافة شركة جديدة</h2>
                <div class="form-group">
                    <label for="companyName">اسم الشركة</label>
                    <input type="text" id="companyName" required>
                </div>
                <div class="form-group">
                    <label for="companyCategory">التصنيف</label>
                    <select id="companyCategory" required>
                        <option value="">اختر التصنيف</option>
                        <!-- سيتم إضافة التصنيفات ديناميكياً -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="companyImage">رابط الصورة</label>
                    <input type="url" id="companyImage" required>
                </div>
                <div class="form-group">
                    <label for="companyDescription">وصف الشركة</label>
                    <textarea id="companyDescription" required></textarea>
                </div>
                <div class="form-group">
                    <label for="companyPhone">رقم الهاتف</label>
                    <input type="tel" id="companyPhone" required>
                </div>
                <div class="form-group">
                    <label for="companyLocation">الموقع</label>
                    <input type="text" id="companyLocation" required>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="isVip">
                        شركة مميزة
                    </label>
                </div>
                <button onclick="addCompany()">إضافة الشركة</button>
            </div>

            <div class="companies-list">
                <h2>قائمة الشركات</h2>
                <div id="companiesList">
                    <!-- سيتم إضافة الشركات ديناميكياً -->
                </div>
            </div>
        </div>

        <!-- قسم إدارة التصنيفات -->
        <div id="categories" class="section" style="display: none;">
            <div class="add-company-form">
                <h2>إضافة تصنيف جديد</h2>
                <div class="form-group">
                    <label for="categoryName">اسم التصنيف</label>
                    <input type="text" id="categoryName" required>
                </div>
                <div class="form-group">
                    <label for="parentCategory">التصنيف الأب (اختياري)</label>
                    <select id="parentCategory">
                        <option value="">بدون تصنيف أب</option>
                        <!-- سيتم إضافة التصنيفات ديناميكياً -->
                    </select>
                </div>
                <button onclick="addCategory()">إضافة التصنيف</button>
            </div>

            <div class="companies-list">
                <h2>قائمة التصنيفات</h2>
                <div id="categoriesList">
                    <!-- سيتم إضافة التصنيفات ديناميكياً -->
                </div>
            </div>
        </div>

        <!-- قسم الصفحة الرئيسية -->
        <div id="homepage" class="section" style="display: none;">
            <h2>إدارة الصفحة الرئيسية</h2>
            <div class="settings-form">
                <h3>العنوان الرئيسي</h3>
                <div class="form-group">
                    <label for="mainTitle">العنوان</label>
                    <input type="text" id="mainTitle" value="دليل شركات سوريا الشامل">
                </div>
                <div class="form-group">
                    <label for="mainSubtitle">العنوان الفرعي</label>
                    <input type="text" id="mainSubtitle" value="نرفع أعمالك إلى مستوى جديد">
                </div>
                <button onclick="saveHomepageSettings()">حفظ التغييرات</button>
            </div>
        </div>

        <!-- قسم المستخدمين -->
        <div id="users" class="section" style="display: none;">
            <h2>إدارة المستخدمين</h2>
            <div class="add-company-form">
                <h3>إضافة مستخدم جديد</h3>
                <div class="form-group">
                    <label for="newUsername">اسم المستخدم</label>
                    <input type="text" id="newUsername" required>
                </div>
                <div class="form-group">
                    <label for="newPassword">كلمة المرور</label>
                    <input type="password" id="newPassword" required>
                </div>
                <div class="form-group">
                    <label for="userRole">الصلاحية</label>
                    <select id="userRole">
                        <option value="admin">مدير</option>
                        <option value="editor">محرر</option>
                        <option value="viewer">مشاهد</option>
                    </select>
                </div>
                <button onclick="addUser()">إضافة المستخدم</button>
            </div>
            <div class="users-list">
                <h3>قائمة المستخدمين</h3>
                <div id="usersList">
                    <!-- سيتم إضافة المستخدمين ديناميكياً -->
                </div>
            </div>
        </div>

        <!-- قسم الإعدادات -->
        <div id="settings" class="section" style="display: none;">
            <h2>إعدادات الموقع</h2>
            <div class="settings-form">
                <h3>الإعدادات العامة</h3>
                <div class="form-group">
                    <label for="siteName">اسم الموقع</label>
                    <input type="text" id="siteName" value="Eymta X">
                </div>
                <div class="form-group">
                    <label for="siteDescription">وصف الموقع</label>
                    <textarea id="siteDescription">دليل شركات سوريا الشامل</textarea>
                </div>
                <div class="form-group">
                    <label for="contactEmail">البريد الإلكتروني للتواصل</label>
                    <input type="email" id="contactEmail">
                </div>
                <div class="form-group">
                    <label for="contactPhone">رقم الهاتف للتواصل</label>
                    <input type="tel" id="contactPhone">
                </div>
                <button onclick="saveSettings()">حفظ الإعدادات</button>
            </div>
        </div>

        <!-- قسم التقارير -->
        <div id="reports" class="section" style="display: none;">
            <h2>التقارير والإحصائيات</h2>
            <div class="chart-container">
                <h3>إحصائيات الشركات حسب التصنيف</h3>
                <canvas id="companiesChart"></canvas>
            </div>
            <div class="chart-container">
                <h3>الزيارات الشهرية</h3>
                <canvas id="monthlyVisitsChart"></canvas>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // بيانات المستخدم (في الواقع يجب أن تكون في قاعدة بيانات)
        const ADMIN_USERNAME = 'admin';
        const ADMIN_PASSWORD = 'admin123';

        // تسجيل الدخول
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                loadCompanies();
                loadCategories();
                loadUsers();
                updateStats();
                initCharts();
            } else {
                alert('بيانات الدخول غير صحيحة');
            }
        }

        // إظهار القسم المحدد
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById(sectionId).style.display = 'block';
            
            document.querySelectorAll('.sidebar-menu li').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // إضافة شركة جديدة
        function addCompany() {
            const company = {
                name: document.getElementById('companyName').value,
                category: document.getElementById('companyCategory').value,
                image: document.getElementById('companyImage').value,
                description: document.getElementById('companyDescription').value,
                phone: document.getElementById('companyPhone').value,
                location: document.getElementById('companyLocation').value,
                isVip: document.getElementById('isVip').checked
            };

            // حفظ الشركة في localStorage
            const companies = JSON.parse(localStorage.getItem('companies') || '[]');
            companies.push(company);
            localStorage.setItem('companies', JSON.stringify(companies));

            // تحديث القائمة
            loadCompanies();
            
            // إعادة تعيين النموذج
            document.querySelector('.add-company-form').reset();
        }

        // تحميل الشركات
        function loadCompanies() {
            const companies = JSON.parse(localStorage.getItem('companies') || '[]');
            const companiesList = document.getElementById('companiesList');
            companiesList.innerHTML = '';

            companies.forEach((company, index) => {
                const companyElement = document.createElement('div');
                companyElement.className = 'company-item';
                companyElement.innerHTML = `
                    <div>
                        <h3>${company.name}</h3>
                        <p>${company.description}</p>
                    </div>
                    <div class="actions">
                        <button class="edit-btn" onclick="editCompany(${index})">تعديل</button>
                        <button class="delete-btn" onclick="deleteCompany(${index})">حذف</button>
                    </div>
                `;
                companiesList.appendChild(companyElement);
            });
        }

        // حذف شركة
        function deleteCompany(index) {
            if (confirm('هل أنت متأكد من حذف هذه الشركة؟')) {
                const companies = JSON.parse(localStorage.getItem('companies') || '[]');
                companies.splice(index, 1);
                localStorage.setItem('companies', JSON.stringify(companies));
                loadCompanies();
            }
        }

        // تحميل التصنيفات
        function loadCategories() {
            const categories = JSON.parse(localStorage.getItem('categories') || '[]');
            const categoriesList = document.getElementById('categoriesList');
            const categorySelect = document.getElementById('companyCategory');
            const parentCategorySelect = document.getElementById('parentCategory');

            // تحديث قائمة التصنيفات
            categoriesList.innerHTML = '';
            categorySelect.innerHTML = '<option value="">اختر التصنيف</option>';
            parentCategorySelect.innerHTML = '<option value="">بدون تصنيف أب</option>';

            categories.forEach((category, index) => {
                // إضافة للقائمة الرئيسية
                const categoryElement = document.createElement('div');
                categoryElement.className = 'company-item';
                categoryElement.innerHTML = `
                    <div>
                        <h3>${category.name}</h3>
                        <p>${category.parent ? 'تصنيف فرعي' : 'تصنيف رئيسي'}</p>
                    </div>
                    <div class="actions">
                        <button class="edit-btn" onclick="editCategory(${index})">تعديل</button>
                        <button class="delete-btn" onclick="deleteCategory(${index})">حذف</button>
                    </div>
                `;
                categoriesList.appendChild(categoryElement);

                // إضافة للقوائم المنسدلة
                const option = new Option(category.name, category.name);
                categorySelect.add(option);
                parentCategorySelect.add(new Option(category.name, category.name));
            });
        }

        // إضافة تصنيف جديد
        function addCategory() {
            const category = {
                name: document.getElementById('categoryName').value,
                parent: document.getElementById('parentCategory').value || null
            };

            const categories = JSON.parse(localStorage.getItem('categories') || '[]');
            categories.push(category);
            localStorage.setItem('categories', JSON.stringify(categories));

            loadCategories();
            document.querySelector('#categories .add-company-form').reset();
        }

        // حذف تصنيف
        function deleteCategory(index) {
            if (confirm('هل أنت متأكد من حذف هذا التصنيف؟')) {
                const categories = JSON.parse(localStorage.getItem('categories') || '[]');
                categories.splice(index, 1);
                localStorage.setItem('categories', JSON.stringify(categories));
                loadCategories();
            }
        }

        // إضافة مستخدم جديد
        function addUser() {
            const user = {
                username: document.getElementById('newUsername').value,
                password: document.getElementById('newPassword').value,
                role: document.getElementById('userRole').value
            };

            const users = JSON.parse(localStorage.getItem('users') || '[]');
            users.push(user);
            localStorage.setItem('users', JSON.stringify(users));

            loadUsers();
            document.querySelector('#users .add-company-form').reset();
        }

        // تحميل المستخدمين
        function loadUsers() {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const usersList = document.getElementById('usersList');
            usersList.innerHTML = '';

            users.forEach((user, index) => {
                const userElement = document.createElement('div');
                userElement.className = 'user-item';
                userElement.innerHTML = `
                    <div>
                        <h4>${user.username}</h4>
                        <p>الصلاحية: ${user.role}</p>
                    </div>
                    <div class="actions">
                        <button class="edit-btn" onclick="editUser(${index})">تعديل</button>
                        <button class="delete-btn" onclick="deleteUser(${index})">حذف</button>
                    </div>
                `;
                usersList.appendChild(userElement);
            });
        }

        // حفظ إعدادات الصفحة الرئيسية
        function saveHomepageSettings() {
            const settings = {
                mainTitle: document.getElementById('mainTitle').value,
                mainSubtitle: document.getElementById('mainSubtitle').value
            };
            localStorage.setItem('homepageSettings', JSON.stringify(settings));
            alert('تم حفظ الإعدادات بنجاح');
        }

        // حفظ الإعدادات العامة
        function saveSettings() {
            const settings = {
                siteName: document.getElementById('siteName').value,
                siteDescription: document.getElementById('siteDescription').value,
                contactEmail: document.getElementById('contactEmail').value,
                contactPhone: document.getElementById('contactPhone').value
            };
            localStorage.setItem('siteSettings', JSON.stringify(settings));
            alert('تم حفظ الإعدادات بنجاح');
        }

        // تحديث الإحصائيات
        function updateStats() {
            const companies = JSON.parse(localStorage.getItem('companies') || '[]');
            const categories = JSON.parse(localStorage.getItem('categories') || '[]');
            const users = JSON.parse(localStorage.getItem('users') || '[]');

            document.getElementById('totalCompanies').textContent = companies.length;
            document.getElementById('vipCompanies').textContent = companies.filter(c => c.isVip).length;
            document.getElementById('totalCategories').textContent = categories.length;
            document.getElementById('totalUsers').textContent = users.length;
        }

        // تهيئة الرسوم البيانية
        function initCharts() {
            // رسم بياني للزيارات
            const visitsCtx = document.getElementById('visitsChart').getContext('2d');
            new Chart(visitsCtx, {
                type: 'line',
                data: {
                    labels: ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو'],
                    datasets: [{
                        label: 'الزيارات',
                        data: [65, 59, 80, 81, 56, 55],
                        borderColor: '#0077cc',
                        tension: 0.1
                    }]
                }
            });

            // رسم بياني للشركات حسب التصنيف
            const companiesCtx = document.getElementById('companiesChart').getContext('2d');
            new Chart(companiesCtx, {
                type: 'pie',
                data: {
                    labels: ['تصنيف 1', 'تصنيف 2', 'تصنيف 3'],
                    datasets: [{
                        data: [30, 50, 20],
                        backgroundColor: ['#0077cc', '#28a745', '#dc3545']
                    }]
                }
            });
        }

        // تسجيل الخروج
        function logout() {
            if (confirm('هل أنت متأكد من تسجيل الخروج؟')) {
                document.getElementById('loginForm').style.display = 'block';
                document.getElementById('dashboard').style.display = 'none';
                document.getElementById('username').value = '';
                document.getElementById('password').value = '';
            }
        }
    </script>
</body>
</html> 