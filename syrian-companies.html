<!DOCTYPE html>

<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<title>Ø¯Ù„ÙŠÙ„ Ø´Ø±ÙƒØ§Øª Ø³ÙˆØ±ÙŠØ§ Ø§Ù„Ø´Ø§Ù…Ù„ - Eymta X</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<style>
    body { 
      font-family: sans-serif; 
      background-color: #f9f9f9; 
      color: #333; 
      margin: 0; 
      padding: 0; 
      line-height: 1.6;
    }
    header { 
      background-color: #111; 
      color: white; 
      padding: 15px; 
      text-align: center; 
    }
    header h1 { 
      margin: 0; 
      font-size: 1.5rem;
    }
    .search { 
      padding: 12px; 
      width: 90%; 
      max-width: 600px; 
      margin: 15px auto; 
      display: block;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
    }
    
    .main-content {
      display: flex;
      gap: 20px;
      padding: 15px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .sidebar {
      width: 300px;
      background: white;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      height: fit-content;
      position: sticky;
      top: 20px;
    }

    .category-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .main-category {
      margin-bottom: 12px;
      font-weight: bold;
      color: #0077cc;
      cursor: pointer;
      padding: 8px;
      border-radius: 6px;
      transition: background-color 0.3s;
    }

    .main-category:hover {
      background-color: #f0f7ff;
    }

    .sub-categories {
      list-style: none;
      padding-right: 15px;
      margin: 5px 0;
      display: none;
    }

    .sub-categories li {
      margin: 8px 0;
      cursor: pointer;
      color: #555;
      transition: color 0.3s;
      padding: 6px 8px;
      border-radius: 4px;
    }

    .sub-categories li:hover {
      color: #0077cc;
      background-color: #f0f7ff;
    }

    .container {
      flex: 1;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
      justify-content: flex-start;
    }

    .company {
      background: white;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      text-align: right;
      position: relative;
      transition: transform 0.3s;
    }

    .company:hover {
      transform: translateY(-5px);
    }

    .vip {
      border: 2px solid gold;
      background-color: #fffbe6;
    }

    .vip::before {
      content: "Ø´Ø±ÙƒØ© Ù…Ù…ÙŠØ²Ø©";
      position: absolute;
      top: -10px;
      left: -10px;
      background-color: gold;
      color: #111;
      padding: 5px 10px;
      border-radius: 0 0 10px 0;
      font-size: 14px;
    }

    .company img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    .company h3 {
      margin: 10px 0;
      font-size: 1.2rem;
    }

    .company p {
      margin: 8px 0;
      color: #666;
    }

    .stars { 
      color: #ccc; 
      cursor: pointer; 
      margin: 10px 0;
    }
    .stars span.selected { color: gold; }
    .rating-count { 
      font-size: 12px; 
      color: #555; 
      margin-top: 5px;
    }
    
    footer {
      background-color: #222;
      color: white;
      text-align: center;
      padding: 20px;
      margin-top: 40px;
    }

    .back-btn {
      display: block;
      text-align: center;
      margin: 20px auto;
      text-decoration: none;
      padding: 12px 24px;
      background: #0077cc;
      color: white;
      border-radius: 8px;
      width: fit-content;
      transition: background-color 0.3s;
    }

    .back-btn:hover {
      background-color: #005fa3;
    }

    @media (max-width: 768px) {
      .main-content {
        flex-direction: column;
        padding: 10px;
      }
      
      .sidebar {
        width: 100%;
        position: static;
        margin-bottom: 20px;
      }

      .container {
        grid-template-columns: 1fr;
      }

      .company {
        width: 100%;
      }

      .company img {
        height: 200px;
      }

      header {
        padding: 10px;
      }

      header h1 {
        font-size: 1.3rem;
      }

      .search {
        width: 95%;
        padding: 10px;
      }

      .main-category {
        font-size: 0.95rem;
      }

      .sub-categories li {
        font-size: 0.9rem;
      }
    }

    @media (max-width: 480px) {
      .company img {
        height: 180px;
      }

      .company h3 {
        font-size: 1.1rem;
      }

      .company p {
        font-size: 0.9rem;
      }
    }

    /* New styles for improvements */
    .filter-bar {
        background: white;
        padding: 15px;
        border-radius: 12px;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
        margin: 20px 0;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: center;
    }

    .filter-group {
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .filter-group select {
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 6px;
        background: white;
    }

    .company-details {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.8);
        z-index: 1000;
        padding: 20px;
        overflow-y: auto;
    }

    .company-details-content {
        background: white;
        max-width: 800px;
        margin: 20px auto;
        padding: 20px;
        border-radius: 12px;
        position: relative;
    }

    .close-details {
        position: absolute;
        top: 10px;
        left: 10px;
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
        color: #666;
    }

    .company-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 10px;
        margin: 15px 0;
    }

    .company-gallery img {
        width: 100%;
        height: 150px;
        object-fit: cover;
        border-radius: 8px;
        cursor: pointer;
    }

    .company-info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin: 15px 0;
    }

    .info-item {
        background: #f8f9fa;
        padding: 10px;
        border-radius: 6px;
    }

    .info-item i {
        color: #0077cc;
        margin-left: 5px;
    }

    .comments-section {
        margin-top: 20px;
        border-top: 1px solid #ddd;
        padding-top: 20px;
    }

    .comment {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 10px;
    }

    .comment-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        color: #666;
    }

    .share-buttons {
        display: flex;
        gap: 10px;
        margin: 15px 0;
    }

    .share-button {
        padding: 8px 15px;
        border: none;
        border-radius: 6px;
        color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .share-button.facebook { background: #1877f2; }
    .share-button.twitter { background: #1da1f2; }
    .share-button.whatsapp { background: #25d366; }

    .map-preview {
        height: 200px;
        border-radius: 8px;
        margin: 15px 0;
        overflow: hidden;
    }

    .company-hours {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 10px;
        margin: 15px 0;
    }

    .hour-item {
        background: #f8f9fa;
        padding: 8px;
        border-radius: 6px;
        text-align: center;
    }

    .hour-item.active {
        background: #e3f2fd;
        color: #0077cc;
    }

    .loading-spinner {
        display: none;
        text-align: center;
        padding: 20px;
    }

    .loading-spinner i {
        font-size: 24px;
        color: #0077cc;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .no-results {
        text-align: center;
        padding: 40px;
        color: #666;
        display: none;
    }

    .company-stats {
        display: flex;
        gap: 15px;
        margin: 10px 0;
        color: #666;
    }

    .stat-item {
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .stat-item i {
        color: #0077cc;
    }
</style>
<script>
document.addEventListener("DOMContentLoaded", function() {
  document.querySelectorAll(".main-category").forEach(function(category) {
    category.addEventListener("click", function() {
      let sub = this.nextElementSibling;
      if (sub && sub.classList.contains("sub-categories")) {
        sub.style.display = sub.style.display === "block" ? "none" : "block";
      }
    });
  });
});
</script></head>
<body>
<div style="background:#fff; text-align:center; padding:18px 0 8px 0;">
<a href="index.html" style="font-size:2rem; font-weight:bold; color:#0077cc; text-decoration:none; letter-spacing:2px; font-family:sans-serif;">eymtax</a>
</div>
<header>
<h1><a href="index.html" style="color: white; text-decoration: none;">Eymta X</a></h1>
<p>Ù†Ø±ÙØ¹ Ø£Ø¹Ù…Ø§Ù„Ùƒ Ø¥Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯</p>
<a href="tel:+963938029294" style="display: inline-block; padding: 12px 24px; background-color: #0077cc; color: white; text-decoration: none; border-radius: 8px; font-size: 18px; margin: 20px 0;">â• Ø£Ø¶Ù Ø´Ø±ÙƒØªÙƒ</a>
<input class="search" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø´Ø±ÙƒØ©..." type="text"/>
</header>
<div class="main-content"><div class="filter-bar">
    <div class="filter-group">
        <label>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:</label>
        <select id="cityFilter">
            <option value="">Ø§Ù„ÙƒÙ„</option>
            <option value="Ø­Ù…Ø§Ø©">Ø­Ù…Ø§Ø©</option>
            <option value="Ø¯Ù…Ø´Ù‚">Ø¯Ù…Ø´Ù‚</option>
            <option value="Ø­Ù„Ø¨">Ø­Ù„Ø¨</option>
            <option value="Ø§Ù„Ù„Ø§Ø°Ù‚ÙŠØ©">Ø§Ù„Ù„Ø§Ø°Ù‚ÙŠØ©</option>
        </select>
    </div>
    <div class="filter-group">
        <label>Ø§Ù„ØªÙ‚ÙŠÙŠÙ…:</label>
        <select id="ratingFilter">
            <option value="">Ø§Ù„ÙƒÙ„</option>
            <option value="5">5 Ù†Ø¬ÙˆÙ…</option>
            <option value="4">4 Ù†Ø¬ÙˆÙ… ÙˆØ£Ø¹Ù„Ù‰</option>
            <option value="3">3 Ù†Ø¬ÙˆÙ… ÙˆØ£Ø¹Ù„Ù‰</option>
        </select>
    </div>
    <div class="filter-group">
        <label>Ø§Ù„ØªØ±ØªÙŠØ¨:</label>
        <select id="sortFilter">
            <option value="name">Ø§Ù„Ø§Ø³Ù…</option>
            <option value="rating">Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</option>
            <option value="reviews">Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª</option>
        </select>
    </div>
</div>
<div class="ad-banner-container" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 20px;"><img src="img/Ø§Ø¹Ù„Ø§Ù†-1.png" style="max-width: 100%; height: auto; width: 100%; max-width: 728px; border-radius: 8px;"/><img src="img/Ø§Ø¹Ù„Ø§Ù†-2.png" style="max-width: 100%; height: auto; width: 100%; max-width: 728px; border-radius: 8px;"/><img src="img/Ø§Ø¹Ù„Ø§Ù†-3.png" style="max-width: 100%; height: auto; width: 100%; max-width: 728px; border-radius: 8px;"/></div>
<aside class="sidebar">
<ul class="category-list"><li class="main-category">Ù…Ø·Ø§Ø¹Ù… / ÙƒØ§ÙÙŠÙ‡Ø§Øª</li><ul class="sub-categories"><li>Ù…Ø·Ø§Ø¹Ù… Ø´Ø±Ù‚ÙŠØ©</li><li>Ù…Ø·Ø§Ø¹Ù… ØºØ±Ø¨ÙŠØ©</li><li>Ù…Ø´Ø§ÙˆÙŠ</li><li>Ù…Ø®Ø§Ø¨Ø²</li><li>Ø­Ù„ÙˆÙŠØ§Øª</li><li>ÙƒØ§ÙÙŠÙ‡Ø§Øª</li></ul><li class="main-category">Ø´Ø­Ù† / Ù†Ù‚Ù„</li><ul class="sub-categories"><li>Ø´Ø±ÙƒØ§Øª Ø´Ø­Ù† Ø¯Ø§Ø®Ù„ÙŠ</li><li>Ø´Ø±ÙƒØ§Øª Ø´Ø­Ù† Ø®Ø§Ø±Ø¬ÙŠ</li><li>Ù†Ù‚Ù„ Ø¨Ø¶Ø§Ø¦Ø¹</li><li>Ù†Ù‚Ù„ Ø±ÙƒØ§Ø¨</li></ul><li class="main-category">ØªØµÙˆÙŠØ± / ØªØ³ÙˆÙŠÙ‚</li><ul class="sub-categories"><li>ØªØµÙˆÙŠØ± Ù…Ù†ØªØ¬Ø§Øª</li><li>ØªØµÙˆÙŠØ± Ø£Ø¹Ø±Ø§Ø³</li><li>ØªØµÙˆÙŠØ± Ø¥Ø¹Ù„Ø§Ù†ÙŠ</li><li>ØªØµÙ…ÙŠÙ… Ø¬Ø±Ø§ÙÙŠÙƒ</li><li>Ø¥Ø¯Ø§Ø±Ø© Ù…Ø­ØªÙˆÙ‰</li></ul><li class="main-category">ØªØµÙ†ÙŠØ¹ / ÙˆØ±Ø´Ø§Øª</li><ul class="sub-categories"><li>Ù†Ø¬Ø§Ø±Ø©</li><li>Ø­Ø¯Ø§Ø¯Ø©</li><li>Ø®ÙŠØ§Ø·Ø©</li><li>Ù…Ø·Ø§Ø¨Ø¹</li><li>ØµÙ†Ø§Ø¹Ø© ØºØ°Ø§Ø¦ÙŠØ©</li></ul><li class="main-category">ØªØ¬Ø§Ø±Ø© Ø¹Ø§Ù…Ø©</li><ul class="sub-categories"><li>Ø£Ø¯ÙˆØ§Øª ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©</li><li>Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©</li><li>Ù…Ù„Ø§Ø¨Ø³</li><li>Ø¹Ù‚Ø§Ø±Ø§Øª</li></ul><li class="main-category">Ø®Ø¯Ù…Ø§Øª Ø·Ø¨ÙŠØ©</li><ul class="sub-categories"><li>Ø¹ÙŠØ§Ø¯Ø§Øª</li><li>Ù…Ø®Ø§Ø¨Ø±</li><li>ØµÙŠØ¯Ù„ÙŠØ§Øª</li><li>Ù…Ø±Ø§ÙƒØ² Ø¹Ù„Ø§Ø¬</li></ul><li class="main-category">ØªØ¹Ù„ÙŠÙ… / ØªØ¯Ø±ÙŠØ¨</li><ul class="sub-categories"><li>Ù…Ø¹Ø§Ù‡Ø¯ Ù„ØºØ§Øª</li><li>Ø¯ÙˆØ±Ø§Øª Ø¨Ø±Ù…Ø¬Ø©</li><li>ÙƒÙˆØ±Ø³Ø§Øª ØªØµÙˆÙŠØ±</li><li>Ù…Ø¯Ø§Ø±Ø³ Ø®Ø§ØµØ©</li></ul><li class="main-category">ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ / Ø¨Ø±Ù…Ø¬Ø©</li><ul class="sub-categories"><li>Ø´Ø±ÙƒØ§Øª Ø¨Ø±Ù…Ø¬Ø©</li><li>ØªØµÙ…ÙŠÙ… Ù…ÙˆØ§Ù‚Ø¹</li><li>ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ù…ÙˆØ¨Ø§ÙŠÙ„</li><li>Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</li></ul><li class="main-category">Ø£Ø¹Ù…Ø§Ù„ ÙŠØ¯ÙˆÙŠØ©</li><ul class="sub-categories"><li>ØµÙ†Ø§Ø¹Ø© ØµØ§Ø¨ÙˆÙ†</li><li>ØªØ·Ø±ÙŠØ²</li><li>Ø­ÙŠØ§ÙƒØ©</li><li>Ù…Ø¬ÙˆÙ‡Ø±Ø§Øª ÙŠØ¯ÙˆÙŠØ©</li></ul></ul>
</aside>
<div class="container" id="companyContainer">
<div class="company vip" data-category="Ø·Ø¨Ø§Ø¹Ø©" data-name="Ø´Ø±ÙƒØ© Ø§Ù„Ù†ÙˆØ± Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©">
<img src="https://via.placeholder.com/280x150?text=Ù†ÙˆØ±+Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©"/>
<h3>Ø´Ø±ÙƒØ© Ø§Ù„Ù†ÙˆØ± Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©</h3>
<p>Ù…ØªØ®ØµØµØ© ÙÙŠ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¨Ø±ÙˆØ´ÙˆØ±Ø§Øª ÙˆØ§Ù„ÙÙ„Ø§ÙŠØ±Ø§Øª ÙˆØ¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„.</p>
<p>ğŸ“ 0999999999 | ğŸ“ Ø­Ù…Ø§Ø©</p>
<div class="stars" data-name="Ø´Ø±ÙƒØ© Ø§Ù„Ù†ÙˆØ± Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©"></div>
<div class="rating-count" id="count-Ø´Ø±ÙƒØ© Ø§Ù„Ù†ÙˆØ± Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©">0 ØªÙ‚ÙŠÙŠÙ…</div>
</div>
<div class="company" data-category="ØªØ³ÙˆÙŠÙ‚" data-name="Ù…Ø±ÙƒØ² Ø§Ù„Ø¨ÙŠØ§Ù† Ù„Ù„ØªØ³ÙˆÙŠÙ‚">
<img src="https://via.placeholder.com/280x150?text=Ø§Ù„Ø¨ÙŠØ§Ù†+Ù„Ù„ØªØ³ÙˆÙŠÙ‚"/>
<h3>Ù…Ø±ÙƒØ² Ø§Ù„Ø¨ÙŠØ§Ù† Ù„Ù„ØªØ³ÙˆÙŠÙ‚</h3>
<p>Ø®Ø¨Ø±Ø§Ø¡ ÙÙŠ Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆØ§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…Ù…ÙˆÙ„Ø©.</p>
<p>ğŸ“ 0933333333 | ğŸ“ Ø¯Ù…Ø´Ù‚</p>
<div class="stars" data-name="Ù…Ø±ÙƒØ² Ø§Ù„Ø¨ÙŠØ§Ù† Ù„Ù„ØªØ³ÙˆÙŠÙ‚"></div>
<div class="rating-count" id="count-Ù…Ø±ÙƒØ² Ø§Ù„Ø¨ÙŠØ§Ù† Ù„Ù„ØªØ³ÙˆÙŠÙ‚">0 ØªÙ‚ÙŠÙŠÙ…</div>
</div>
<div class="company" data-category="ØªØµÙˆÙŠØ±" data-name="ÙÙˆØªÙˆØºØ±Ø§ÙÙŠØ§ Ø³ØªÙˆØ¯ÙŠÙˆ">
<img src="https://via.placeholder.com/280x150?text=ÙÙˆØªÙˆØºØ±Ø§ÙÙŠØ§+Ø³ØªÙˆØ¯ÙŠÙˆ"/>
<h3>ÙÙˆØªÙˆØºØ±Ø§ÙÙŠØ§ Ø³ØªÙˆØ¯ÙŠÙˆ</h3>
<p>ØªØµÙˆÙŠØ± Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª.</p>
<p>ğŸ“ 0911111111 | ğŸ“ Ø§Ù„Ù„Ø§Ø°Ù‚ÙŠØ©</p>
<div class="stars" data-name="ÙÙˆØªÙˆØºØ±Ø§ÙÙŠØ§ Ø³ØªÙˆØ¯ÙŠÙˆ"></div>
<div class="rating-count" id="count-ÙÙˆØªÙˆØºØ±Ø§ÙÙŠØ§ Ø³ØªÙˆØ¯ÙŠÙˆ">0 ØªÙ‚ÙŠÙŠÙ…</div>
</div>
</div>
</div>
<div class="loading-spinner">
    <i class="fas fa-spinner"></i>
</div>
<div class="no-results">
    <i class="fas fa-search" style="font-size: 48px; color: #ccc; margin-bottom: 20px;"></i>
    <h3>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬</h3>
    <p>Ø¬Ø±Ø¨ ØªØºÙŠÙŠØ± Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«</p>
</div>
<div class="company-details" id="companyDetails">
    <div class="company-details-content">
        <button class="close-details" onclick="closeDetails()">Ã—</button>
        <div id="detailsContent"></div>
    </div>
</div>
<a class="back-btn" href="index.html">ğŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
<footer>
<p>Eymta X â€“ Ù†Ø±ÙØ¹ Ø£Ø¹Ù…Ø§Ù„Ùƒ Ø¥Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯</p>
</footer>
<script>
const companies = document.querySelectorAll(".company");
const mainCategories = document.querySelectorAll(".main-category");

// Toggle sub-categories
mainCategories.forEach(category => {
  category.addEventListener("click", () => {
    category.classList.toggle("active");
  });
});

// Filter companies by category
function filter(category) {
  companies.forEach(card => {
    const match = category === 'all' || card.dataset.category === category;
    card.style.display = match ? 'block' : 'none';
  });
}

// Search functionality
document.getElementById("searchInput").addEventListener("input", function () {
  const q = this.value.toLowerCase();
  companies.forEach(c => {
    const name = c.dataset.name.toLowerCase();
    c.style.display = name.includes(q) ? 'block' : 'none';
  });
});

// Star rating system
function createStars(container, name) {
  const saved = localStorage.getItem('rate_' + name);
  const countKey = 'count_' + name;
  const count = localStorage.getItem(countKey) || 0;
  const wrap = container;
  for (let i = 1; i <= 5; i++) {
    const s = document.createElement("span");
    s.textContent = "â˜…";
    s.classList.add("star");
    if (saved && i <= saved) s.classList.add("selected");
    s.onclick = () => {
      if (!saved) {
        localStorage.setItem('rate_' + name, i);
        localStorage.setItem(countKey, +count + 1);
        document.getElementById('count-' + name).textContent = (+count + 1) + " ØªÙ‚ÙŠÙŠÙ…";
        [...wrap.children].forEach((star, idx) => {
          star.classList.toggle("selected", idx < i);
        });
        alert("Ø´ÙƒØ±Ø§Ù‹ Ù„ØªÙ‚ÙŠÙŠÙ…Ùƒ!");
      } else {
        alert("Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø³Ø§Ø¨Ù‚Ø§Ù‹.");
      }
    };
    wrap.appendChild(s);
  }
  document.getElementById('count-' + name).textContent = count + " ØªÙ‚ÙŠÙŠÙ…";
}

document.querySelectorAll('.stars').forEach(div => {
  const name = div.dataset.name;
  createStars(div, name);
});

// Show first category's sub-categories by default
document.querySelector(".main-category").classList.add("active");

// Enhanced company data structure
const companyData = {
    "Ø´Ø±ÙƒØ© Ø§Ù„Ù†ÙˆØ± Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©": {
        name: "Ø´Ø±ÙƒØ© Ø§Ù„Ù†ÙˆØ± Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©",
        category: "Ø·Ø¨Ø§Ø¹Ø©",
        city: "Ø­Ù…Ø§Ø©",
        phone: "0999999999",
        description: "Ù…ØªØ®ØµØµØ© ÙÙŠ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¨Ø±ÙˆØ´ÙˆØ±Ø§Øª ÙˆØ§Ù„ÙÙ„Ø§ÙŠØ±Ø§Øª ÙˆØ¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„.",
        images: [
            "https://via.placeholder.com/800x600?text=Ù†ÙˆØ±+Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©+1",
            "https://via.placeholder.com/800x600?text=Ù†ÙˆØ±+Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©+2",
            "https://via.placeholder.com/800x600?text=Ù†ÙˆØ±+Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©+3"
        ],
        location: {
            lat: 35.1376,
            lng: 36.7584
        },
        hours: {
            "Ø§Ù„Ø£Ø­Ø¯": "9:00 - 18:00",
            "Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†": "9:00 - 18:00",
            "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡": "9:00 - 18:00",
            "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡": "9:00 - 18:00",
            "Ø§Ù„Ø®Ù…ÙŠØ³": "9:00 - 18:00",
            "Ø§Ù„Ø¬Ù…Ø¹Ø©": "10:00 - 16:00",
            "Ø§Ù„Ø³Ø¨Øª": "Ù…ØºÙ„Ù‚"
        },
        website: "https://example.com",
        social: {
            facebook: "https://facebook.com/example",
            instagram: "https://instagram.com/example"
        },
        isVip: true
    }
    // Add more companies here
};

// Enhanced filtering and sorting
function filterCompanies() {
    const searchQuery = document.getElementById('searchInput').value.toLowerCase();
    const cityFilter = document.getElementById('cityFilter').value;
    const ratingFilter = document.getElementById('ratingFilter').value;
    const sortFilter = document.getElementById('sortFilter').value;

    let filteredCompanies = Object.values(companyData).filter(company => {
        const matchesSearch = company.name.toLowerCase().includes(searchQuery) ||
                            company.description.toLowerCase().includes(searchQuery);
        const matchesCity = !cityFilter || company.city === cityFilter;
        const matchesRating = !ratingFilter || getCompanyRating(company.name) >= parseInt(ratingFilter);
        return matchesSearch && matchesCity && matchesRating;
    });

    // Sort companies
    filteredCompanies.sort((a, b) => {
        switch(sortFilter) {
            case 'name':
                return a.name.localeCompare(b.name);
            case 'rating':
                return getCompanyRating(b.name) - getCompanyRating(a.name);
            case 'reviews':
                return getCompanyReviewCount(b.name) - getCompanyReviewCount(a.name);
            default:
                return 0;
        }
    });

    displayCompanies(filteredCompanies);
}

// Enhanced company display
function displayCompanies(companies) {
    const container = document.getElementById('companyContainer');
    container.innerHTML = '';

    if (companies.length === 0) {
        document.querySelector('.no-results').style.display = 'block';
        return;
    }

    document.querySelector('.no-results').style.display = 'none';

    companies.forEach(company => {
        const card = createCompanyCard(company);
        container.appendChild(card);
    });
}

// Enhanced company card creation
function createCompanyCard(company) {
    const card = document.createElement('div');
    card.className = `company ${company.isVip ? 'vip' : ''}`;
    card.dataset.name = company.name;
    card.dataset.category = company.category;

    card.innerHTML = `
        <img src="${company.images[0]}" alt="${company.name}"/>
        <h3>${company.name}</h3>
        <p>${company.description}</p>
        <div class="company-stats">
            <div class="stat-item">
                <i class="fas fa-map-marker-alt"></i>
                <span>${company.city}</span>
            </div>
            <div class="stat-item">
                <i class="fas fa-phone"></i>
                <span>${company.phone}</span>
            </div>
        </div>
        <div class="stars" data-name="${company.name}"></div>
        <div class="rating-count" id="count-${company.name}">0 ØªÙ‚ÙŠÙŠÙ…</div>
        <button onclick="showDetails('${company.name}')" class="view-details-btn">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„</button>
    `;

    return card;
}

// Company details view
function showDetails(companyName) {
    const company = companyData[companyName];
    const detailsContent = document.getElementById('detailsContent');
    
    detailsContent.innerHTML = `
        <h2>${company.name}</h2>
        <div class="company-gallery">
            ${company.images.map(img => `<img src="${img}" alt="${company.name}"/>`).join('')}
        </div>
        <div class="company-info-grid">
            <div class="info-item">
                <i class="fas fa-map-marker-alt"></i>
                <span>${company.city}</span>
            </div>
            <div class="info-item">
                <i class="fas fa-phone"></i>
                <span>${company.phone}</span>
            </div>
            <div class="info-item">
                <i class="fas fa-globe"></i>
                <a href="${company.website}" target="_blank">Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</a>
            </div>
        </div>
        <div class="map-preview">
            <iframe
                width="100%"
                height="100%"
                frameborder="0"
                style="border:0"
                src="https://www.google.com/maps/embed/v1/place?key=YOUR_API_KEY&q=${company.location.lat},${company.location.lng}"
                allowfullscreen>
            </iframe>
        </div>
        <div class="company-hours">
            ${Object.entries(company.hours).map(([day, hours]) => `
                <div class="hour-item ${isToday(day) ? 'active' : ''}">
                    <strong>${day}</strong>
                    <div>${hours}</div>
                </div>
            `).join('')}
        </div>
        <div class="share-buttons">
            <button class="share-button facebook" onclick="shareOnFacebook('${company.name}')">
                <i class="fab fa-facebook-f"></i>
                Ù…Ø´Ø§Ø±ÙƒØ©
            </button>
            <button class="share-button twitter" onclick="shareOnTwitter('${company.name}')">
                <i class="fab fa-twitter"></i>
                ØªØºØ±ÙŠØ¯
            </button>
            <button class="share-button whatsapp" onclick="shareOnWhatsApp('${company.name}')">
                <i class="fab fa-whatsapp"></i>
                ÙˆØ§ØªØ³Ø§Ø¨
            </button>
        </div>
        <div class="comments-section">
            <h3>Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª</h3>
            <div id="comments-${company.name}"></div>
            <form onsubmit="addComment(event, '${company.name}')">
                <textarea placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ Ù‡Ù†Ø§..." required></textarea>
                <button type="submit">Ø¥Ø±Ø³Ø§Ù„</button>
            </form>
        </div>
    `;

    document.getElementById('companyDetails').style.display = 'block';
    loadComments(companyName);
}

function closeDetails() {
    document.getElementById('companyDetails').style.display = 'none';
}

// Helper functions
function isToday(day) {
    const days = ['Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª'];
    return days[new Date().getDay()] === day;
}

function getCompanyRating(name) {
    return parseInt(localStorage.getItem('rate_' + name)) || 0;
}

function getCompanyReviewCount(name) {
    return parseInt(localStorage.getItem('count_' + name)) || 0;
}

// Social sharing functions
function shareOnFacebook(companyName) {
    const url = encodeURIComponent(window.location.href);
    window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`);
}

function shareOnTwitter(companyName) {
    const text = encodeURIComponent(`ØªØ¹Ø±Ù Ø¹Ù„Ù‰ ${companyName} ÙÙŠ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ø³ÙˆØ±ÙŠØ©`);
    const url = encodeURIComponent(window.location.href);
    window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`);
}

function shareOnWhatsApp(companyName) {
    const text = encodeURIComponent(`ØªØ¹Ø±Ù Ø¹Ù„Ù‰ ${companyName} ÙÙŠ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ø³ÙˆØ±ÙŠØ©`);
    window.open(`https://wa.me/?text=${text}`);
}

// Comments system
function loadComments(companyName) {
    const comments = JSON.parse(localStorage.getItem('comments_' + companyName)) || [];
    const commentsContainer = document.getElementById('comments-' + companyName);
    
    commentsContainer.innerHTML = comments.map(comment => `
        <div class="comment">
            <div class="comment-header">
                <span>${comment.author}</span>
                <span>${new Date(comment.date).toLocaleDateString('ar-SA')}</span>
            </div>
            <div class="comment-content">${comment.text}</div>
        </div>
    `).join('');
}

function addComment(event, companyName) {
    event.preventDefault();
    const form = event.target;
    const text = form.querySelector('textarea').value;
    
    const comments = JSON.parse(localStorage.getItem('comments_' + companyName)) || [];
    comments.push({
        author: 'Ø²Ø§Ø¦Ø±',
        text: text,
        date: new Date().toISOString()
    });
    
    localStorage.setItem('comments_' + companyName, JSON.stringify(comments));
    loadComments(companyName);
    form.reset();
}

// Initialize
document.addEventListener('DOMContentLoaded', function() {
    filterCompanies();
    
    // Add event listeners for filters
    document.getElementById('cityFilter').addEventListener('change', filterCompanies);
    document.getElementById('ratingFilter').addEventListener('change', filterCompanies);
    document.getElementById('sortFilter').addEventListener('change', filterCompanies);
    document.getElementById('searchInput').addEventListener('input', filterCompanies);
});
</script>
</body>
</html>
